{"version":3,"sources":["one-inch-punch.min.js"],"names":["Object","defineProperty","exports","value","_ComponentConfiguration","_interopRequireDefault","require","obj","__esModule","default","setupSimpleViewModel","viewModel","id","arguments","length","undefined","prefix","ko","isObservable","observable","concat","unwrap","Date","getTime","ToggleSwitch","params","this","Slider","_default","_classCallCheck","instance","Constructor","TypeError","ComponentConfiguration","name","viewModelInstance","viewUrl","preProcessor","postProcessor","_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","ComponentManager","componentLoader","components","loaders","unshift","forEach","component","console","log","registration","template","fromUrl","constructor","replace","processors","pre","post","register","TemplateFromUrlComponentLoader","viewPath","endsWith","templateConfig","callback","fullUrl","maxCacheAge","$","get","markupString","defaultLoader","loadTemplate"],"mappings":"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","file":"one-inch-punch.min.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _ComponentConfiguration = _interopRequireDefault(require(\"./ComponentConfiguration.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/* eslint-disable no-param-reassign */\nfunction setupSimpleViewModel(viewModel, value) {\n  var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var prefix = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'component-';\n  if (ko.isObservable(value)) viewModel.value = value;else viewModel.value = ko.observable(value || false); // ToDo: Fix the auto-id bug\n\n  viewModel.id = \"\".concat(prefix).concat(id && ko.unwrap(id) || new Date().getTime());\n}\n\nvar ToggleSwitch = new _ComponentConfiguration[\"default\"]('toggle', function viewModel(params) {\n  setupSimpleViewModel(this, params.value, params.id, 'toggle-switch-');\n}, '/app/components/toggleswitch.html');\nvar Slider = new _ComponentConfiguration[\"default\"]('slider', function viewModel(params) {\n  setupSimpleViewModel(this, params.value, params.id, 'slider-');\n}, '/app/components/slider.html');\nvar _default = [ToggleSwitch, Slider];\nexports[\"default\"] = _default;\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ComponentConfiguration = function ComponentConfiguration(name, viewModelInstance) {\n  var viewUrl = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var preProcessor = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var postProcessor = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n\n  _classCallCheck(this, ComponentConfiguration);\n\n  this.name = name;\n  this.viewModelInstance = viewModelInstance;\n  this.viewUrl = viewUrl;\n  this.preProcessor = preProcessor;\n  this.postProcessor = postProcessor;\n};\n\nexports[\"default\"] = ComponentConfiguration;\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/* eslint-disable class-methods-use-this */\nvar ComponentManager =\n/*#__PURE__*/\nfunction () {\n  function ComponentManager() {\n    _classCallCheck(this, ComponentManager);\n  }\n\n  _createClass(ComponentManager, [{\n    key: \"init\",\n    value: function init(componentLoader) {\n      ko.components.loaders.unshift(componentLoader);\n    }\n  }, {\n    key: \"register\",\n    value: function register(components) {\n      components.forEach(function (component) {\n        console.log('processing component', component);\n        var registration = {\n          viewModel: {\n            instance: component.viewModelInstance\n          },\n          template: {\n            fromUrl: component.viewUrl || \"/app/views/\".concat(component.viewModelInstance.constructor.name.replace('ViewModel', 'View'), \".html\"),\n            processors: {\n              pre: component.preProcessor,\n              post: component.postProcessor\n            }\n          }\n        };\n\n        if (typeof component.viewModelInstance === 'function') {\n          registration.viewModel = component.viewModelInstance;\n        } else {\n          registration.viewModel = {\n            instance: component.viewModelInstance\n          };\n        }\n\n        ko.components.register(component.name, registration);\n      });\n    }\n  }]);\n\n  return ComponentManager;\n}();\n\nvar _default = new ComponentManager();\n\nexports[\"default\"] = _default;\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar TemplateFromUrlComponentLoader =\n/*#__PURE__*/\nfunction () {\n  function TemplateFromUrlComponentLoader() {\n    var viewPath = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n    _classCallCheck(this, TemplateFromUrlComponentLoader);\n\n    this.viewPath = viewPath;\n    if (this.viewPath && !this.viewPath.endsWith('/')) this.viewPath += '/';\n  }\n\n  _createClass(TemplateFromUrlComponentLoader, [{\n    key: \"loadTemplate\",\n    value: function loadTemplate(name, templateConfig, callback) {\n      if (templateConfig.fromUrl) {\n        // Uses jQuery's ajax facility to load the markup from a file\n        var fullUrl = \"\".concat(this.viewPath).concat(templateConfig.fromUrl, \"?cacheAge=\").concat(templateConfig.maxCacheAge);\n        $.get(fullUrl, function (markupString) {\n          if (templateConfig.processors && templateConfig.processors.pre) templateConfig.processors.pre(); // We need an array of DOM nodes, not a string.\n          // We can use the default loader to convert to the\n          // required format.\n\n          ko.components.defaultLoader.loadTemplate(name, markupString, callback);\n          if (templateConfig.processors && templateConfig.processors.post) templateConfig.processors.post();\n        });\n      } else {\n        // Unrecognized config format. Let another loader handle it.\n        callback(null);\n      }\n    }\n  }]);\n\n  return TemplateFromUrlComponentLoader;\n}();\n\nexports[\"default\"] = TemplateFromUrlComponentLoader;\n//# sourceMappingURL=one-inch-punch.js.map\n"]}